# BotFlow Backend - Phase 2 Configuration
# Copy this file to .env and fill in your values

# ============================================
# Core Configuration
# ============================================
NODE_ENV=development
PORT=3001
HOST=0.0.0.0
LOG_LEVEL=info

# ============================================
# Supabase (Required)
# ============================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ============================================
# OpenAI (Required for RAG)
# ============================================
OPENAI_API_KEY=sk-your-openai-api-key-here

# ============================================
# JWT (Required)
# ============================================
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-64-character-jwt-secret-here

# ============================================
# n8n Configuration (Required for Phase 2)
# ============================================
# Your n8n instance URL
N8N_API_URL=http://localhost:5678

# n8n API key (optional, for programmatic workflow creation)
N8N_API_KEY=your-n8n-api-key

# n8n webhook base URL (where n8n receives webhooks)
N8N_WEBHOOK_URL=http://localhost:5678

# Webhook secret for HMAC signature verification (Required!)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
N8N_WEBHOOK_SECRET=your-64-character-webhook-secret-here

# ============================================
# WhatsApp Providers (At least one required)
# ============================================

# Bird (Primary)
BIRD_API_KEY=your-bird-api-key
BIRD_WORKSPACE_ID=your-bird-workspace-id
BIRD_WEBHOOK_SECRET=your-bird-webhook-secret

# Twilio (Secondary/Backup)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# ============================================
# Payment Providers (Optional)
# ============================================

# Paystack (South Africa)
PAYSTACK_SECRET_KEY=sk_test_your-paystack-secret-key
PAYSTACK_PUBLIC_KEY=pk_test_your-paystack-public-key
PAYSTACK_WEBHOOK_SECRET=your-paystack-webhook-secret

# Stripe (Deprecated for SA, but kept for international)
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret

# ============================================
# Google OAuth (Optional - for integrations)
# ============================================
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3001/api/integrations/google-sheets/callback

# ============================================
# Redis (Optional - for message queue)
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password

# ============================================
# Anthropic (Optional - for Ralph assistant)
# ============================================
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key

# ============================================
# Frontend URL (Required for CORS)
# ============================================
FRONTEND_URL=http://localhost:3000

# ============================================
# Phase 2 Week 1 Setup Checklist
# ============================================
#
# 1. ✅ Copy this file to .env
# 2. ✅ Fill in SUPABASE_* values from your Supabase project
# 3. ✅ Fill in OPENAI_API_KEY from OpenAI dashboard
# 4. ✅ Generate JWT_SECRET using the command above
# 5. ✅ Generate N8N_WEBHOOK_SECRET using the command above
# 6. ✅ Set N8N_* URLs to your n8n instance
# 7. ✅ Run database migration: 001_pgvector_knowledge_base.sql
# 8. ✅ Create 'knowledge-files' bucket in Supabase Storage
# 9. ✅ Start backend: npm run dev
# 10. ✅ Test health endpoint: curl http://localhost:3001/health
#
# ============================================
# Quick Setup Commands
# ============================================
#
# Generate JWT Secret:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# Generate Webhook Secret:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# Test Backend:
# curl http://localhost:3001/health
#
# Test Knowledge API:
# curl http://localhost:3001/api/bots/YOUR_BOT_ID/knowledge
#
